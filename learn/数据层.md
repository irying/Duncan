### 数据层规划

#### 分层

准确来讲，数据层分为数据访问层（Data Access Layer)和数据存储层（Data Storage Layer）。

目前，业界的数据访问层定位于应用程序与持久化数据库之间，比如kingshard、MyCat等，主要完成数据的分库分表、读写分离等。

数据存储层则是所有数据的最终落地点，**高可用**和**可扩展性**是它的主要目标，无论是关系型数据库存储MySql，还是非关系型数据库（Redis、MongoDB)，或者大小文件存储（HBase、Hive)，也无论是单机运维还是集群运维，都是这一层要关注的事。

#### 规划

基于上述分层思想做如下规划

首先要完成数据访问层，提供RPC跟HTTP接口，让业务层专注于业务逻辑。由于之前的本地进程通信改成了跨进程通信，一个避免不了的问题是数据模型的跨平台使用问题，这里计划采用protobuf协议。

其次是存储层的调整规划，包括mysql的容量规划（之前的分库方案）、Redis键值统一备案、各种算法数据的存储整理等。

![1533797003783](https://wx3.sinaimg.cn/mw690/e5b38bb8gy1fu3g32h9jsj20ef07y74g.jpg)

